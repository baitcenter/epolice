<p id="notice"><%= notice %></p>
<div class="title is-2"><i class="fa fa-list noir"></i> Liste d'affectations</div>
<div class="subtitle has-text-grey is-5">
  Le module d'allfectation permet de montrer le lieu d'affectation des agents pour une période donnée, ceci par rapport à un commissariat de rattachement
</div>
<hr class="has-background-grey">
<table class="table" id="table">
  <thead>
    <tr>
      <th>Avatar</th>
      <th>Mle</th>
      <th>Agent</th>
      <th>Grade</th>
      <th>Téléphone</th>
      <th>Carrefour</th>
      <th>Date&nbsp;début</th>
      <th>Date&nbsp;Fin</th>
      <th colspan="3"></th>
    </tr>
  </thead>

  <tbody>
    <% @affectations.each do |affectation| %>
      <tr>
        <td>
          <% if affectation.agent.avatar.attached? %>
            <% image_tag('https://bulma.io/images/placeholders/1280x960.png', size: 50) %>
          <% else %>
            <%= image_tag(affectation.agent.avatar, size: 50) %>
          <% end %>
        </td>
        <td><%= affectation.agent.matricule %></td>
        <td><%= affectation.agent.name %>&nbsp;<%= affectation.agent.prenom %></td>
        <td><%= affectation.agent.grade.name %></td>
        <td><%= affectation.agent.phone %></td>
        <td><%= affectation.carrefour.name %></td>
        <td><%= affectation.date %></td>
        <td><%= affectation.fin %></td>
        <td><%= link_to 'Voir', affectation, class: "button is-link is-outlined is-small" %></td>
        <td><%= link_to 'Edit', edit_affectation_path(affectation), class: "button is-link is-outlined is-small" %></td>
        <td><%= link_to 'Destroy', affectation, method: :delete, data: { confirm: 'Are you sure?' }, class: "button is-danger is-outlined is-small" %></td>
      </tr>
    <% end %>
  </tbody>
</table>

<br>

<%= link_to 'Nouvelle Affectation', new_affectation_path, class: "button is-link is-outlined" %>
</main>